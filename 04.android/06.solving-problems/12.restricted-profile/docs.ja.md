---
title: "制限付きプロファイルが原因の問題"
published: true
taxonomy:
  category:
    - docs
---

制限付きプロファイル（アカウント）のある Android 7 以降デバイスの一部（特に Samsung Galaxy S10 系端末）で起こる問題です。このようなプロファイルがある場合、**AdGuard**は、VPN を使用する他アプリケーションと同様に、VPN トラフィックの選択的なフィルタリングに対する制限がかかってしまいます。その結果、AdGuard は**ローカル VPN モード**での保護を起動できなくなります。
また、この状況の理由の 1 つは、デバイスで**デュアルアプリ/デュアルメッセンジャー**を使用していることです。

### 解決方法

現在対処方法は 3 つございます（多くの方にとって方法 ① が一番便利かと思いますが）。

### 方法 ①: *制限付きアカウント*を削除する

多くの端末の場合:
端末設定 → 詳細設定 → 複数ユーザー → 制限付きプロファイルを削除する

ユーザーアカウント管理については[こちら](https://support.google.com/a/answer/6223444?hl=ja)にてさらにご確認いただけます。

> 制限付きユーザーアカウントが他の機能を通じて作成され、直接削除できない場合があることに注意してください。たとえば、**Samsung**または**LG**デバイスでデュアルメッセンジャーまたはデュアルアプリ機能を使用する場合です。これらのケースで問題を解決する方法を以下に記載いたしました。

#### LG と Samsung デバイス

**LG**または**Samsung**端末には「**デュアルアプリ**」または「デュアルメッセンジャー」機能を使用することにより、制限付きプロファイルが作成され、VPN 起動の問題が発生する可能性があります。
この問題を解決するには、その機能を無効にする必要があります。

#### Samsung 端末

- 端末設定 → 高度な設定 → デュアルメッセンジャー
- チェックついているアプリをすべてオフにする
- 端末画面オフにして 5 ～ 10 分程度放置する

#### LG 端末

- 端末設定を開く
- 「便利な機能」を開く（端末によっては「一般」や他のメニューの場合があります）
- 「デュアルアプリ」を開く
- アプリに対するスイッチをすべてオフにする
- 端末を再起動する

### 方法 ②: ADB 経由で AdGuard に権限を与える

> ※この方法は**AdGuard v3.5 Nightly 6**以降で利用できることに注意してください。古いバージョンを使用している場合は、[こちらから](adguard.com/beta.html)の Nightly 最新バージョンを入手できます（もしくは AdGuard アプリ内設定で「アップデートチャンネル」を「Nightly」に切り替えてアプリをアップデートできます）。

❶ **開発者モード**をアクティブにし、**USB デバッグ**を有効にします。

- 端末で**設定**アプリを開きます。
- **システム**セクションに移動し（設定メニューの最後の項目）、サブアイテム**端末について**を見つけます。
- 「**ビルド番号**」の行を 7 回タップします。その後、「**開発者になりました！**」のような通知が表示されます（必要に応じて、デバイスのロック解除コードを入力してください）。
- **設定**→**システム**→**詳細設定**→**開発者向けオプション**→ 下にスクロールして「**USB デバッグ**」を開く（もしくはオンにする）→ 警告を注意深く読んでいただいた後、[**USB デバッグを許可する**]ウィンドウでデバッグが有効になっていることを確認します。

※端末によってメニュー項目の名称が多少違ったりする場合がございます。

> 上記に関してまだご不明やお困りな点ございましたら、[こちらで](https://developer.android.com/studio/debug/dev-options?hl=ja)さらに詳しい手順をご確認ください。

❷ADB をインストトールして設定します（方法：[Windows 編](https://expnote.com/how-to-install-android-debug-bridge/)、[Mac 編](https://child-programmer.com/m-adb/)）。

❸ **USB ケーブル**を使用して**ADB**をインストールしたコンピューターまたはラップトップに Android デバイスを接続します。

❹ PC で**コマンドライン**を開きます。

- **Windows**を使用している場合は**Cmd.exe**
- **macOS**を使用している場合は**ターミナル**

❺ `adb shell pm grant com.adguard.android android.permission.INTERACT_ACROSS_USERS` というコマンドを入力して**Enter**を押します。これで完了です。

### 方法 ③: *ローカル HTTP プロキシモード*で AdGuard を使用する（ルート権限が必要になります）

このモードを有効にする手順:
**AdGuard 設定**→**ネットワーク**→**フィルタリング方式**（近日中「フィルタリング方法」に変わります）→ **ローカル HTTP プロキシ**を選択
